# RUN-001

**Created:** 2025-12-24
**Updated:** 2025-12-26
**Status:** Approved - Ready for Development
**Base:** sc-002 (Stream feeds + PlugNmeet)

---

## 1. Inputs

### Source Document Versions

| Document | Version | Date |
|----------|---------|------|
| GOALS.md | v3 | 2025-12-24 |
| USER-STORIES.md | v8 | 2025-12-24 |
| DIRECTIVES.md | v1 | 2025-11-30 |
| DB-SCHEMA.md | v1 | 2025-12-24 |
| PAGES.md | v1 | 2025-12-23 |
| COMPONENTS.md | v1 | 2025-12-23 |
| API.md | v1 | 2025-12-23 |

### Parameters

| Parameter | Value | Rationale |
|-----------|-------|-----------|
| Timeline | 4 months | Brian confirmed (CD-033), adjust features per block |
| Video Platform | **PlugNmeet** ✅ | Brian approved after evaluation (2025-12-26) |
| Activity Feeds | Stream.io | DIR-002, confirmed feeds-only usage |
| Calendar | **Custom built** ✅ | With Google/Apple calendar export (2025-12-26) |
| Email | **Resend** ✅ | Developer-friendly, React Email support (2025-12-26) |
| Recording Storage | **PlugNmeet + R2** ✅ | Store on PlugNmeet, replicate to R2 (2025-12-26) |
| Hosting | Cloudflare | DIR-003 |
| Payment | Stripe | DIR-004, split confirmed (2025-12-26) |
| UI Framework | React + TailwindCSS | DIR-005, DIR-006 |

### Directives Applied

| ID | Directive | Status |
|----|-----------|--------|
| DIR-001 | MUST-USE BigBlueButton or VideoProvider-compliant platform | Applied via interface |
| DIR-002 | MUST-USE Stream.io for activity feeds | Applied |
| DIR-003 | PREFER Cloudflare for hosting/edge services | Applied |
| DIR-004 | MUST-USE Stripe for payment processing | Applied |
| DIR-005 | MUST-USE React for UI components | Applied |
| DIR-006 | MUST-USE TailwindCSS for styling | Applied |

### Scope Constraints

- **P0 stories only:** 144 total (required for Genesis Cohort launch)
- **Feature removal strategy:** If scope exceeds 4 months, remove features (not extend timeline)
- **Block sequence:** Block 1 (4-5 weeks) → Block 2 (4-5 weeks) → Block 3 (4-6 weeks) + Buffer (2 weeks)

### Key Clarifications from CD-033 + 2025-12-26 Decisions

- **Unified pricing model:** Course price = S-T price (no Teacher premium)
- **Revenue split (Creator teaches):** 15% platform, 85% Creator
- **Revenue split (S-T teaches):** 15% platform, 15% Creator, 70% S-T ✅
- **Enrollment flow:** S-T calendar + list shown before purchase, "Schedule Later" option
- **Refund policy:** Any-time refunds allowed

---

## 2. Generation Notes

**Generated:** 2025-12-24

### Documents Consulted
- GOALS.md (v3) - 27 goals, mission statement
- USER-STORIES.md (v8) - 329 stories, 144 P0
- DIRECTIVES.md (v1) - 6 directives
- DB-SCHEMA.md (v1) - 30+ entities
- PAGES.md (v1) - 27 pages
- COMPONENTS.md (v1) - 40+ components
- API.md (v1) - 50+ endpoints

### Key Decisions Made During Generation
1. **Cloudflare D1** recommended for database (aligns with hosting preference)
2. **Custom JWT auth** recommended (simple, no vendor lock-in)
3. **Feature removal priority** defined for scope management
4. **Block sequence** mapped to specific features
5. **VideoProvider interface** confirmed as abstraction layer

### Assumptions Applied
- Stream.io for feeds (not Bluesky)
- Single certificate type for MVP
- 1:1 sessions only (no group)
- Moderators post-MVP
- Newsletter/AI assistant excluded

---

## 3. Results

- **Scenario File:** [scenario.md](scenario.md)
- **Generated:** 2025-12-24
- **Summary:** Complete technical specification for sc-002 (Stream + VideoProvider). 14 sections covering stack, scope, architecture, integrations, and implementation guidance. Ready for review.

---

## 4. Review & Discussion

### Client Feedback

*[To be filled after review]*

### Questions State (Updated 2025-12-26)

Complete status of all questions from QUESTIONS-FOR-BRIAN.md:

| # | Status | Topic | Resolution |
|---|--------|-------|------------|
| 1 | Open | GetStream.io vs Bluesky protocol | Assuming Stream per DIR-002 |
| 2 | **✅ Resolved** | Video platform final decision | **PlugNmeet** (2025-12-26) |
| 3 | **✅ Resolved** | PlugNmeet evaluation status | Brian approved (2025-12-26) |
| 4 | **✅ Resolved** | Single platform or hybrid? | PlugNmeet only (2025-12-26) |
| 5 | Open | Newsletter with subscription payments | Excluding from MVP scope |
| 6 | Open | AI Assistant technology | Excluding from MVP scope |
| 7 | Open | Newsletters technology | Excluding from MVP scope |
| 8 | Open | Bluesky vs GetStream.io | Assuming Stream per DIR-002 |
| 9 | Open | Certificate of Mastery vs Completion | Using single certificate type for MVP |
| 10 | Open | Profile visibility default | Assuming Public default |
| 11 | Open | Community structure | Assuming instructor_followers model |
| 12 | Open | Channels within communities | Treating as test artifacts |
| 13 | Open | Auto-join rules | Assuming Town Hall only |
| 14 | Open | Course vs Instructor feed access | Per CD-024 model |
| 15 | Open | Availability states | Using Available/Unavailable only |
| 16 | **✅ Resolved** | Session booking integration | Custom calendar + Google/Apple export (2025-12-26) |
| 17 | Open | Group sessions | Excluding from MVP (1:1 only) |
| 18 | Open | Creator Dashboard | Using same view as S-T for MVP |
| 19 | Open | Admin features | Minimal admin for MVP |
| 20 | Open | Homework system | Excluding from MVP |
| 21 | Open | Session resources | External links (like course content) |
| 22 | Open | User menu in header | Including standard dropdown |
| 23 | **✅ Resolved** | S-T Pricing visibility | Unified pricing model (CD-033) |
| 24 | Open | Course completion criteria | S-T recommend + Creator approve |
| 25 | Open | Moderator invite system | Post-MVP per CD-032 |
| 26 | **✅ Resolved** | Timeline (6 vs 4 months) | 4 months, adjust features per block |
| 27 | **✅ Resolved** | Email provider | Resend (2025-12-26) |
| 28 | **✅ Resolved** | S-T payment split | 15% platform, 15% Creator, 70% S-T (2025-12-26) |
| 29 | **✅ Resolved** | Recording storage | PlugNmeet + replicate to R2 (2025-12-26) |
| 30 | **✅ Resolved** | Stream.io auth approach | Server-side token generation via `generateUserToken()` (2025-12-26) |

**Summary:** 17 Open | 0 Deferred | 13 Resolved

**Note:** Remaining open questions use documented assumptions. These can be revised if Brian provides different answers during development.

---

## 5. Decisions & Rationale

| Decision | Choice | Rationale | Date |
|----------|--------|-----------|------|
| Video platform | **PlugNmeet** | Brian approved after evaluation | 2025-12-26 |
| Calendar system | **Custom + export** | Custom built with Google/Apple calendar export | 2025-12-26 |
| Email service | **Resend** | Developer-friendly, React Email support | 2025-12-26 |
| Recording storage | **PlugNmeet + R2** | Store on PlugNmeet, replicate to R2 | 2025-12-26 |
| S-T payment split | **15/15/70** | Platform 15%, Creator 15%, S-T 70% | 2025-12-26 |
| Creator payment split | **15/85** | Platform 15%, Creator 85% | 2025-12-26 |
| Pricing model | Unified (course = S-T price) | Per Brian in CD-033 | 2025-12-24 |
| Timeline strategy | Feature removal per block | 4 months target, adjust features after each block | 2025-12-26 |
| Stream.io auth | **Token provider pattern** | Server generates token via `generateUserToken()`, client connects | 2025-12-26 |

---

## 6. Outcome

**Status:** ✅ Approved - Ready for Development
**Approval Date:** 2025-12-26
**Next Step:** Begin Block 0 (Authentication & Database Foundation)

---

## Files in This Run

| File | Purpose | Status |
|------|---------|--------|
| run-001.md | This file - run specification | Complete |
| scenario.md | Generated SPECS.md | **Complete** |
| review-notes.md | Client feedback | Pending |
| assets/video-platform-decisions.md | VideoProvider interface, BBB vs PlugNmeet | **Complete** |
| assets/stream-usage.md | Stream.io feeds-only usage | **Complete** |
| assets/hosting-decisions.md | Cloudflare stack decisions | **Complete** |
| assets/payment-decisions.md | Stripe Connect, 85/15 split | **Complete** |

---

## Review Checklist

- [ ] Technology stack appropriate?
- [ ] Scope (144 P0 stories) achievable in 4 months?
- [ ] Assumptions acceptable for open questions?
- [ ] Block sequence makes sense?
- [ ] Feature removal priority correct?
- [ ] Architecture fits Cloudflare preference?
- [ ] Any missing requirements?
