# Session Learnings - 2025-11-30

## Session Focus
Established the GATHER/RUN phase framework for Alpha Peer project planning, including infrastructure for tracking constraints, versioning documents, and managing scenarios.

---

## Key Learnings

### 1. Two-Phase Project Structure (GATHER â†’ RUN)
- **GATHER Phase:** Iteratively collect client docs, research services, document user stories, add directives
- **RUN Phase:** Generate SPECS.md scenarios from gathered information, with sc-001 as fully-custom baseline
- Clear separation helps manage complexity and provides structured handoff points

### 2. Gap Analysis Reveals Hidden User Stories
- Initial 105 user stories grew to 150 after gap analysis
- Infrastructure stories often missing from client docs:
  - Authentication (sign up, login, password reset)
  - Payment infrastructure (splitting, payouts, refunds)
  - Email/notifications
  - Database, file storage, image optimization
- Systematic gap analysis via technology research surfaces these

### 3. Directives as Constraints Layer
- DIRECTIVES.md sits between GATHER and RUN phases
- Types: MUST-USE, MUST-AVOID, NO-COMBINE, PREFER, REQUIRES, FEATURE-FLAG
- Captures compatibility issues, client requirements, research findings
- Ensures constraints aren't lost when generating scenarios

### 4. Document Versioning for Scenario Lineage
- Version numbers (v1, v2...) on key docs: GOALS.md, USER-STORIES.md, DIRECTIVES.md, CLAUDE.md
- Scenarios record source versions when created
- Enables "stale" detection when source docs change after scenario creation
- Increment only for substantive changes, not typos/formatting

### 5. sc-001 (Fully Custom) as Baseline
- Always create a no-major-SaaS scenario first
- Uses only: Cloudflare, Vercel, npm packages
- Establishes maximum custom dev effort baseline
- Other scenarios show "dev time saved" relative to baseline

### 6. Slash Commands as Workflow Enforcement
- `/r-add-client-doc`, `/r-add-software`, `/r-add-user-story`, `/r-add-directive`
- Each command knows which files to update (cross-references, statistics, versions)
- Reduces human error in maintaining document consistency
- Commands document their own behavior for future reference

---

## Technical Insights

### BigBlueButton
- Self-hosted only, requires dedicated server infrastructure
- API calls must be server-side (never expose secrets in browser)
- Good for education but needs external AI for transcription

### Stream
- Three products: Chat, Activity Feeds, Video (skip Video - BBB handles that)
- Pre-built React components available
- Usage-based pricing, free tier for development

### Astro.js + React Islands
- Static-first with selective hydration
- `client:load`, `client:visible`, `client:idle` directives control when React loads
- Good fit for content-heavy pages with interactive widgets

### Cloudflare vs Vercel
- Cloudflare: Better long-term cost, R2 for storage with free egress
- Vercel: Better DX, preview deploys, AI features
- Both have native Astro adapters

---

## Process Improvements Identified

1. **Version Tracking:** Adding version numbers early prevents lineage confusion later
2. **Directive Capture:** Start DIRECTIVES.md from day one, not after problems arise
3. **Infrastructure Stories:** Run gap analysis after initial story extraction

---

## Files Created This Session

### Research Documents
- `tech-001-bigbluebutton.md`
- `tech-002-stream.md`
- `tech-003-astrojs.md`
- `tech-004-reactjs.md`
- `tech-005-tailwindcss.md`
- `comp-001-cloudflare-vs-vercel.md`

### New Root Documents
- `DIRECTIVES.md`

### New Folders
- `/scenarios/`

### New Slash Commands
- `/r-add-software`
- `/r-add-user-story`
- `/r-add-directive`

---

## Open Questions for Next Session

1. Which gap-filling services to research first? (Payment seems highest priority for MVP)
2. Should we create sc-001 now or wait until more services researched?
3. How detailed should scenario SPECS.md files be?
