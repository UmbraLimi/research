# Session Learnings — 2026-02-09 17:48

## Architecture & Design

- **Single vault access tier is simpler than folder-based tiers.** The original design had DENY/REDACT/SELECTIVE/FULL per folder. Collapsing to all-FULL with inline `===` credential redaction dramatically simplified the MCP server, vault structure, and mental model.
- **Two vaults solve the privacy problem cleanly.** Rather than complex per-folder access rules within one vault, separating private content into `~/Vaults/private/` eliminates the tension between CC access and personal privacy. The private vault is a deferred topic with its own local LLM.
- **Wikilinks in headings are the routing mechanism.** No config file needed to map daily note headings to projects. `## [[PeerLoop]]` self-declares "PeerLoop" as a project. First use creates the project.
- **Multi-project headings create shared atomic notes.** `## [[PeerLoop]] • [[Cloudflare]]` creates one atomic note linked from both project logs. Cross-referencing for free.
- **Merge rule prevents duplication.** One atomic note per unique heading-signature per day. Multiple entries for the same project on the same day append to the same note.

## Card Types & Records

- **Coding timecards should be CC-generated, not human-entered.** They derive entirely from git commit history. Running `/cco-session-close` from the project repo gives direct git access; no need to route through daily notes.
- **Meeting card covers phone calls and site visits.** The `via` field (Zoom, Phone, Site Visit, In-person) distinguishes them. Optional `from` (who initiated) and `where` (location) fields handle the differences. No need for separate card types.
- **Email bodies should be summarized, not quoted.** Code blocks and blockquotes both have rendering issues. The original email lives in the email client; the card captures the substance as bullet points.
- **Slack cards are timed.** Unlike initial assumption, Slack threads have start/end times and separate fields are better than a compressed single field, since conversations can become billable.

## Workflow & Tooling

- **DataviewJS with external scripts doesn't work on Obsidian mobile (Android/iOS).** This is a hard constraint. Mobile reports must use either basic DQL queries or plain markdown. The CC headless mode on Mac Mini solves this by processing daily notes and writing results as plain markdown that Obsidian renders on any device.
- **CC headless mode (`claude -p`) enables mobile workflows.** Edit daily note on phone → Obsidian Sync to Mac Mini → CC processes headlessly → results sync back. Single source of truth preserved.
- **Versioned schemas + CC migration solves the Obsidian template problem.** Templates are "stamp once" — changing them doesn't update existing notes. Versioned schemas with `/cco-migrate-schema` backfill changes to all existing records of that type.
- **Task importance via `+` symbols is fast entry.** User writes `+++++` in daily notes; CC converts to `[importance:: 5]` during extraction for Dataview queryability.

## PLAN.md Format

- **Named phases with dot-notation beat numbered phases.** Execution order is fluid; naming phases (FOUNDATION, GLOBAL-SKILLS) decouples *what* from *when*. The Current Sequence at the top of PLAN.md is the only place that defines order.
- **COMPLETED-PLAN.md keeps PLAN.md lean.** Full detail of completed phases moves out; PLAN.md retains just the heading + one-line summary with a link.

## Process

- **Global skills need unique prefixes.** The `cco-` prefix prevents collisions with existing global skills from other projects (`q-*`, `par-*`, `r-*`).
- **Never run history-changing git commands without explicit permission.** Rebase, merge, reset --hard, push --force, amend — always explain why and let the user decide. Even when the operation seems safe.
